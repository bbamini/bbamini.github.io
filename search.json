[
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About Me",
    "section": "",
    "text": "I am a chemical engineer and data scientist. Previously I studied at Caltech and Stanford.\nMy interests are at the intersection of biotechnology and data science. I‚Äôm excited by new biotech inventions and tools for computational biology as well as ideas that can be applied towards achieving better health outcomes and equity. On the technical front, I enjoy building vibrant visualizations, predictive modeling and applying analytics for social good.\nReach out if you‚Äôd like to connect or collaborate!\n \n  \n   \n  \n    \n     LinkedIn\n  \n  \n    \n     Github\n  \n\n\n\n\nExperience\nI have worked in multiple areas of biotechnology including small molecule drugs, large molecule protein therapies and medical devices.\nSome highlights:\n\nBuilding analytics and software tools for profiling cancer patient adaptive immune repertoires leading to the the discovery of tumor-specific antibodies\nEngineering and design efforts applied to the first digital pill (Ingestible sensor medical device)\nSmall molecule drug development including contributions to first single tablet regimen to cure Hepatitis C"
  },
  {
    "objectID": "learning/20231012_SmarterKids/index.html",
    "href": "learning/20231012_SmarterKids/index.html",
    "title": "The Smartest Kids in the World",
    "section": "",
    "text": "Review and analysis of Amanda Ripley‚Äôs ‚ÄúThe Smartest Kids in the World and how they got that way‚Äù."
  },
  {
    "objectID": "learning/20231012_SmarterKids/index.html#amanda-ripleys-the-smartest-kids-in-the-world-and-how-they-got-that-way",
    "href": "learning/20231012_SmarterKids/index.html#amanda-ripleys-the-smartest-kids-in-the-world-and-how-they-got-that-way",
    "title": "The Smartest Kids in the World",
    "section": "Amanda Ripley‚Äôs The Smartest Kids in the World and how they got that way",
    "text": "Amanda Ripley‚Äôs The Smartest Kids in the World and how they got that way\nIf you are interested in the American education system or simply wondering if there is a secret sauce to making someone smart, then this book will be a fun read.\nHaving grown up in multiple countries (Canada, India, Kenya as well as USA), I‚Äôve often wondered about the many differences in education systems globally. The more I read, I realized the anecdotal observations agreed with my personal experiences in American and non-American school systems. The book highlighted certain key features that paved the way for countries like Finland, South Korea, Poland and Singapore to improve their education outcomes - all while United States lags behind.\nGiven that the book shared perspectives of a handful of American foreign exchange students, I wanted to see if the claims were simply a cherry picked points or if they are backed by statistics. So here is my review and analysis of their conclusions. See Section¬†6 to skip to the book findings.\n(Apparently the book has also been turned into a documentary which I‚Äôm definitely planning to check out once I figure out how to stream it! But the analysis was interesting in the meantime‚Ä¶)"
  },
  {
    "objectID": "learning/20231012_SmarterKids/index.html#how-did-ripley-quantify-smart",
    "href": "learning/20231012_SmarterKids/index.html#how-did-ripley-quantify-smart",
    "title": "The Smartest Kids in the World",
    "section": "How did Ripley quantify ‚Äúsmart‚Äù?",
    "text": "How did Ripley quantify ‚Äúsmart‚Äù?\nThe book used data from The PISA test which is an international standardized test that assesses 15 year old student‚Äôs reading, math and science. Furthermore, it surveys their demographic backgrounds and intangible features such as attitudes towards schooling.\nLuckily some of this data is available in an r package learningtower. So I wanted to dive into the data and try some mixed effects modeling üòÄ\nOne caveat is that this dataset didn‚Äôt dive into the more intangible aspects such as student attitudes and drive. But we can still look at demographic and socioeconomic factors contributing to academic success.\n\n\nCode\nlibrary(tidyverse)\nlibrary(tidymodels)\nlibrary(learningtower)\nlibrary(plotly)\nlibrary(Hmisc)\nlibrary(corrplot)\nlibrary(lmtest)\nlibrary(sandwich)\nlibrary(lme4)\nlibrary(sjPlot)\nlibrary(kableExtra)\nlibrary(car)\nlibrary(gridExtra)\n\n\nall_student &lt;- load_student(\"all\")\ndata(\"school\")\ndata(\"countrycode\")\n\n\nschool_student &lt;- left_join(\n  all_student, \n  school, \n  by = c(\"school_id\", \"country\", \"year\")) %&gt;%\n  left_join(\n    countrycode,\n    by = \"country\"\n  )\n\n# Selecting a few countries \ncountries &lt;- c(\n  \"Brazil\", \"South Korea\", \"Japan\", \"United States\",\n  \"Canada\", \"Singapore\", \"Malaysia\", \n  \"Finland\", \"Denmark\", \"Peru\",\n  \"Poland\", \"Germany\"\n)"
  },
  {
    "objectID": "learning/20231012_SmarterKids/index.html#exploring-the-data",
    "href": "learning/20231012_SmarterKids/index.html#exploring-the-data",
    "title": "The Smartest Kids in the World",
    "section": "Exploring the data",
    "text": "Exploring the data\nHere are the average PISA scores (with 1 standard deviation error bars) for countries with mostly complete datasets across multiple years. Finland and South Korea are definitely among top performers while Poland is in the upper half.\n\n\nCode\ndf &lt;- school_student %&gt;%\n  select(year, country_name, math, read, science, stu_wgt) %&gt;%\n  pivot_longer(cols = c(\"math\", \"read\", \"science\"), names_to = \"subject\", values_to = \"scores\") %&gt;%\n  #filter(subject == \"math\") %&gt;%\n  filter(!is.na(scores)) %&gt;%\n  filter(year %in% c(2006, 2009, 2012, 2015, 2018)) %&gt;% \n  group_by(country_name, subject) %&gt;%\n  filter(n_distinct(year) == 5) %&gt;%\n  ungroup() %&gt;% # Selecting countries with complete timelines\n  group_by(country_name, year, subject) %&gt;%\n  dplyr::summarize(\n    mean_score = weighted.mean(scores, w=stu_wgt),\n    sd_score = sqrt(Hmisc::wtd.var(scores, weights=stu_wgt))\n  ) %&gt;%\n  ungroup() %&gt;%\n  mutate(\n    lower = mean_score-sd_score,\n    upper = mean_score+sd_score\n  )\n  \ndf$country_name = reorder(df$country_name, df$mean_score, mean)\ndf$country_name &lt;- droplevels(df$country_name)\np_yr &lt;- df %&gt;% \n  ggplot(aes(x = country_name, y = mean_score, color = year)) +\n  geom_point(position = position_dodge(width = .5)) +\n  geom_errorbar(aes(ymin = lower, ymax = upper), position=position_dodge(width = .5)) +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +\n  ggtitle(\"Global Scores by Subject\") +\n  xlab(\"Country\") +\n  ylab(\"Mean Score +/- 1 SD\") + \n  theme(legend.position=\"top\") + \n  facet_wrap(~subject, nrow=3, scales=\"free_y\")\n\nggplotly(p_yr)\n\n\n\n\n\n\nHere we see a time-series for select countries. USA is consistently below 500 is math scores while Finland, Poland and South Korea perform highly.\n\n\nCode\np &lt;- school_student %&gt;%\n  select(year, country_name, math, read, science, stu_wgt) %&gt;%\n  group_by(year, country_name) %&gt;%\n  dplyr::summarize(math = weighted.mean(math, w=stu_wgt), \n            read = weighted.mean(read, w=stu_wgt), \n            science = weighted.mean(science, w=stu_wgt)) %&gt;%\n  pivot_longer(cols = c(\"math\", \"read\", \"science\"), names_to = \"subject\", values_to = \"scores\") %&gt;%\n  ungroup() %&gt;%\n  filter(country_name %in% countries) %&gt;%\n  mutate(year = as.numeric(as.character(year))) %&gt;%\n  ggplot(aes(x = year, y = scores, color = country_name)) +\n  facet_wrap(~subject) + geom_point() + geom_line()\n\nggplotly(p)"
  },
  {
    "objectID": "learning/20231012_SmarterKids/index.html#linear-models",
    "href": "learning/20231012_SmarterKids/index.html#linear-models",
    "title": "The Smartest Kids in the World",
    "section": "Linear Models",
    "text": "Linear Models\nFor simplicity, let‚Äôs start with a linear model to explore the effect of each predictor\n\nHow does a student score high?\nFocusing on the math dataset for year 2018, first I cleaned up some of the variables.\nAt the individual student level, we have the following predictors: mother_educ, father_educ, gender, computer, internet, desk, room, television, car, book, wealth, escs. At the school level, we see the variables fund_gov, fund_fees, fund_donation, enrol_boys, enrol_girls, stratio, public_private, staff_shortage, sch_wgt, school_size.\nSome data wrangling:\n\nConvert ordered categorical variables such as number of books and mother/father education levels to numerical values for ease of modeling and interpretation\nConvert television, car and computer to binary values to indicate whether or not they were accessible rather than retaining the number of each that was available\n\n\n\nCode\nmath_df &lt;- school_student %&gt;%\n  filter(!is.na(math) & year == 2018) %&gt;%\n  mutate(television = as.character(television), computer = as.character(computer),\n         car = as.character(car)) %&gt;%\n  mutate(television = ifelse(television %in% c(\"1\", \"2\", \"3+\"), \"yes\", television)) %&gt;%\n  mutate(car = ifelse(car %in% c(\"1\", \"2\", \"3+\"), \"yes\", car)) %&gt;%\n  mutate(computer = ifelse(((is.na(computer)) & (computer_n %in% c(\"1\", \"2\", \"3+\"))), \"yes\", computer)) %&gt;%\n  mutate(\n    n_books = case_when(\n      book == \"0-10\" ~ 0,\n      book == \"11-25\" ~ 1,\n      book == \"26-100\" ~ 2,\n      book == \"201-500\" ~ 3,\n      book == \"more than 500\" ~ 4\n    ),\n    mother_educ_level = case_when(\n      mother_educ == \"less than ISCED1\" ~ 0,\n      mother_educ == \"ISCED 1\" ~ 1,\n      mother_educ == \"ISCED 2\" ~ 2,\n      mother_educ == \"ISCED 3A\" ~ 3,\n      mother_educ == \"ISCED 3B, C\" ~ 3,\n    ),\n    father_educ_level = case_when(\n      father_educ == \"less than ISCED1\" ~ 0,\n      father_educ == \"ISCED 1\" ~ 1,\n      father_educ == \"ISCED 2\" ~ 2,\n      father_educ == \"ISCED 3A\" ~ 3,\n      father_educ == \"ISCED 3B, C\" ~ 3,\n    )\n  )\n\n\nHere are two simple linear models. The first exclusively looks at student level predictors and the second includes school level predictors. We see that all of these student level (first model) and school level (second model) variables may be predictive of a student‚Äôs math scores. Interestingly, the added complexity with the second model is preferred because the AIC is lower.\n\n\nCode\nlm_df &lt;- math_df %&gt;%\n  mutate(boy_fraction = enrol_boys/school_size) %&gt;%\n  mutate_at(c(\"wealth\", \"escs\",\"school_size\", \"staff_shortage\", \"mother_educ_level\", \"father_educ_level\", \"n_books\",\n              \"fund_donation\", \"fund_gov\", \"fund_fees\", \"boy_fraction\", \"stratio\"),\n            ~(scale(.) %&gt;% as.vector)) %&gt;%\n  select(math, mother_educ_level, father_educ_level, gender, computer, internet, desk, room, television, car, n_books, wealth, escs,\n         fund_gov, fund_fees, fund_donation, school_size, stratio, public_private, staff_shortage, \n         country_name, school_id)\n\nlmod &lt;- (lm(math ~ mother_educ_level + father_educ_level + gender + computer + internet + desk +\n              room + television + car + n_books + wealth + escs, lm_df, na.action=\"na.omit\"))\n\nlmod2 &lt;- (lm(math ~ mother_educ_level + father_educ_level + gender + computer + internet + desk +\n               room + television + car + n_books + wealth + escs +\n               fund_gov + fund_fees + fund_donation + school_size + stratio + public_private + staff_shortage, \n             lm_df, na.action=\"na.omit\"))\n\ntab_model(lmod, lmod2, show.stat=TRUE, show.se = TRUE, show.aic = TRUE)\n\n\n\n\n\n\n¬†\nmath\nmath\n\n\nPredictors\nEstimates\nstd. Error\nCI\nStatistic\np\nEstimates\nstd. Error\nCI\nStatistic\np\n\n\n(Intercept)\n378.55\n1.28\n376.04¬†‚Äì¬†381.06\n295.06\n&lt;0.001\n388.75\n1.64\n385.53¬†‚Äì¬†391.96\n237.09\n&lt;0.001\n\n\nmother educ level\n2.42\n0.17\n2.08¬†‚Äì¬†2.76\n14.02\n&lt;0.001\n1.69\n0.21\n1.28¬†‚Äì¬†2.11\n7.95\n&lt;0.001\n\n\nfather educ level\n2.81\n0.17\n2.48¬†‚Äì¬†3.15\n16.47\n&lt;0.001\n2.74\n0.21\n2.33¬†‚Äì¬†3.16\n12.95\n&lt;0.001\n\n\ngender [male]\n7.40\n0.27\n6.87¬†‚Äì¬†7.93\n27.34\n&lt;0.001\n6.96\n0.34\n6.30¬†‚Äì¬†7.62\n20.73\n&lt;0.001\n\n\ncomputer [yes]\n22.71\n0.42\n21.89¬†‚Äì¬†23.53\n54.17\n&lt;0.001\n20.18\n0.51\n19.19¬†‚Äì¬†21.17\n39.95\n&lt;0.001\n\n\ninternet [yes]\n24.92\n0.57\n23.80¬†‚Äì¬†26.03\n43.83\n&lt;0.001\n25.18\n0.68\n23.86¬†‚Äì¬†26.50\n37.29\n&lt;0.001\n\n\ndesk [yes]\n19.36\n0.45\n18.48¬†‚Äì¬†20.23\n43.38\n&lt;0.001\n19.37\n0.57\n18.25¬†‚Äì¬†20.48\n34.10\n&lt;0.001\n\n\nroom [yes]\n-2.60\n0.36\n-3.32¬†‚Äì¬†-1.89\n-7.16\n&lt;0.001\n-0.73\n0.44\n-1.60¬†‚Äì¬†0.14\n-1.65\n0.099\n\n\ntelevision [yes]\n18.75\n1.05\n16.69¬†‚Äì¬†20.82\n17.78\n&lt;0.001\n20.40\n1.30\n17.85¬†‚Äì¬†22.95\n15.69\n&lt;0.001\n\n\ncar [yes]\n5.77\n0.41\n4.96¬†‚Äì¬†6.57\n13.98\n&lt;0.001\n10.51\n0.50\n9.54¬†‚Äì¬†11.49\n21.14\n&lt;0.001\n\n\nn books\n26.80\n0.16\n26.48¬†‚Äì¬†27.11\n167.99\n&lt;0.001\n26.87\n0.20\n26.48¬†‚Äì¬†27.26\n135.14\n&lt;0.001\n\n\nwealth\n-1.73\n0.23\n-2.17¬†‚Äì¬†-1.29\n-7.66\n&lt;0.001\n-6.35\n0.29\n-6.91¬†‚Äì¬†-5.79\n-22.19\n&lt;0.001\n\n\nescs\n16.44\n0.25\n15.94¬†‚Äì¬†16.94\n64.68\n&lt;0.001\n15.41\n0.32\n14.79¬†‚Äì¬†16.03\n48.46\n&lt;0.001\n\n\nfund gov\n\n\n\n\n\n2.86\n0.40\n2.08¬†‚Äì¬†3.64\n7.16\n&lt;0.001\n\n\nfund fees\n\n\n\n\n\n-1.99\n0.45\n-2.88¬†‚Äì¬†-1.10\n-4.39\n&lt;0.001\n\n\nfund donation\n\n\n\n\n\n-1.31\n0.22\n-1.74¬†‚Äì¬†-0.87\n-5.92\n&lt;0.001\n\n\nschool size\n\n\n\n\n\n9.94\n0.17\n9.61¬†‚Äì¬†10.27\n58.82\n&lt;0.001\n\n\nstratio\n\n\n\n\n\n-8.09\n0.18\n-8.45¬†‚Äì¬†-7.73\n-43.91\n&lt;0.001\n\n\npublic private [public]\n\n\n\n\n\n-22.18\n0.57\n-23.30¬†‚Äì¬†-21.07\n-38.91\n&lt;0.001\n\n\nstaff shortage\n\n\n\n\n\n2.40\n0.17\n2.06¬†‚Äì¬†2.73\n14.05\n&lt;0.001\n\n\nObservations\n443071\n282360\n\n\nR2 / R2 adjusted\n0.234 / 0.234\n0.241 / 0.241\n\n\nAIC\n5243507.289\n3335808.291\n\n\n\n\n\n\n\n\nNote: Due to missing values, only a complete dataset of 47% was used in the linear model.\nThe above models treat students from all groups i.e.¬†school and country as identical. We can improve on this by adding design based methods to account for the groupings. This is necessary because the t-statistic currently assumes a standard error based on n of total students irrespective of school or country. When we cluster by school and country, n within each group is smaller. Here are the adjusted p-values using a cluster-robust model.\n\n\nCode\nlmod_cr &lt;- coeftest(lmod, vcov=vcovCL, cluster= ~ school_id + country_name)\nlmod_cr\n\n\n\nt test of coefficients:\n\n                  Estimate Std. Error t value  Pr(&gt;|t|)    \n(Intercept)       378.5497    19.1175 19.8012 &lt; 2.2e-16 ***\nmother_educ_level   2.4202     1.6143  1.4992  0.133813    \nfather_educ_level   2.8130     1.0742  2.6187  0.008827 ** \ngendermale          7.4004     1.1572  6.3953 1.604e-10 ***\ncomputeryes        22.7090     3.4428  6.5960 4.228e-11 ***\ninternetyes        24.9187     6.0526  4.1171 3.838e-05 ***\ndeskyes            19.3551     4.2352  4.5700 4.878e-06 ***\nroomyes            -2.6047     4.2649 -0.6107  0.541377    \ntelevisionyes      18.7530     8.3730  2.2397  0.025110 *  \ncaryes              5.7656     6.9810  0.8259  0.408859    \nn_books            26.7953     1.7376 15.4205 &lt; 2.2e-16 ***\nwealth             -1.7290     4.9418 -0.3499  0.726433    \nescs               16.4413     2.2359  7.3534 1.936e-13 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n\nCode\nlmod2_cr &lt;- coeftest(lmod2, vcov=vcovCL, cluster= ~ school_id + country_name)\nlmod2_cr\n\n\n\nt test of coefficients:\n\n                     Estimate Std. Error t value  Pr(&gt;|t|)    \n(Intercept)          388.7467    23.3912 16.6193 &lt; 2.2e-16 ***\nmother_educ_level      1.6948     1.9965  0.8489  0.395947    \nfather_educ_level      2.7420     1.0437  2.6273  0.008608 ** \ngendermale             6.9604     1.3540  5.1405 2.742e-07 ***\ncomputeryes           20.1839     3.8403  5.2558 1.475e-07 ***\ninternetyes           25.1786     6.3439  3.9690 7.221e-05 ***\ndeskyes               19.3669     4.3372  4.4653 7.998e-06 ***\nroomyes               -0.7335     4.5787 -0.1602  0.872726    \ntelevisionyes         20.4018     9.7626  2.0898  0.036638 *  \ncaryes                10.5147     5.3161  1.9779  0.047941 *  \nn_books               26.8693     2.1227 12.6582 &lt; 2.2e-16 ***\nwealth                -6.3532     4.9574 -1.2816  0.200001    \nescs                  15.4094     2.0863  7.3859 1.518e-13 ***\nfund_gov               2.8616     3.7438  0.7643  0.444661    \nfund_fees             -1.9885     4.4600 -0.4459  0.655700    \nfund_donation         -1.3056     1.4150 -0.9227  0.356180    \nschool_size            9.9403     4.5589  2.1804  0.029226 *  \nstratio               -8.0901     3.5215 -2.2974  0.021599 *  \npublic_privatepublic -22.1830     9.3907 -2.3622  0.018166 *  \nstaff_shortage         2.3971     2.4112  0.9941  0.320160    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n\n\nAfter applying the inference adjustments for correlated errors within clusters, we see that father‚Äôs education level affects test scores while mother‚Äôs education does not. It‚Äôs possibly that there is some correlation between these variables.\nGender does seem predictive of the score. If all other factors are equal, a boy would score 7.4 points higher in math than a girl (when we only account for individual predictors)!\nPresence of computer, internet and desk as well as more books lead to higher scores. TV also seems to have an impact albeit less significant. Having a separate room is not significant predictors of score.\nOddly, wealth is negatively predictive but not a significantly meaningful predictor of score. In contrast, escs or index of economic, social and cultural status is a strong predictor of score. One unit increase in escs leads to 16.44 points increase in math scores with all other factors being equal for the individual variables model.\nIt seems counter intuitive that wealth is inversely correlated with score per the model and also not meaningful! We expect that poverty generally correlates with poorer education outcomes. Perhaps collinearity and interactions between predictors masks the individual effects seen here. Indeed, wealth is correlated with escs as seen below\n\n\n\nCode\nggplot(lm_df %&gt;% na.omit(), aes(x = wealth, y = escs)) +\n  geom_point(alpha=0.05) +\n  geom_smooth(method = \"lm\")\n\n\n\n\n\n\n\n\n\nFurthermore, we see that there are correlations between several of the model predictors particularly wealth and escs\n\n\nCode\ncor_var_df &lt;- lm_df %&gt;%\n  mutate(gender = ifelse(gender == \"male\", 0.0, 1.0),\n         computer = ifelse(computer == \"yes\", 1.0, 0.0),\n         internet = ifelse(internet == \"yes\", 1.0, 0.0),\n         desk = ifelse(desk == \"yes\", 1.0, 0.0),\n         room = ifelse(room == \"yes\", 1.0, 0.0),\n         television = ifelse(television == \"yes\", 1.0, 0.0),\n         car = ifelse(car == \"yes\", 1.0, 0.0),\n         public_private = ifelse(public_private == \"public\", 0.0, 1.0)\n         ) %&gt;%\n  mutate(across(mother_educ_level:escs, as.double))\n\nres &lt;- cor(cor_var_df %&gt;% select(-math, -gender, -country_name, -school_id), use = \"complete.obs\", method=\"spearman\") \n\ncorrplot(res, type = \"upper\", order = \"hclust\", tl.col = \"black\", tl.srt = 45)\n\n\n\n\n\n\n\n\n\nThe correlation plot above shows that there is a risk of multicollinearity since all variables are related. Here is the evaluation of variance inflation. It shows that escs and wealth have high variance inflation factors (VIFs).\n\n\nCode\ncar::vif(lmod)\n\n\nmother_educ_level father_educ_level            gender          computer \n         1.691089          1.649123          1.005247          1.447836 \n         internet              desk              room        television \n         1.424581          1.167456          1.123837          1.047353 \n              car           n_books            wealth              escs \n         1.453686          1.382972          2.810157          3.543222 \n\n\n\n\nHow does a school score high on average?\nA simple linear model here shows that most of these may be predictive of better school outcomes.\n\n\nCode\nschool_df &lt;- math_df %&gt;%\n  group_by(school_id, fund_gov, fund_fees, fund_donation, enrol_boys, enrol_girls, school_size, stratio, public_private, staff_shortage, country_name) %&gt;%\n  dplyr::summarize(math = weighted.mean(math,w=stu_wgt,  na.rm = T)) %&gt;%\n  ungroup() %&gt;%\n  mutate(\n    boy_fraction = enrol_boys/school_size\n  ) %&gt;%\n  mutate_at(c(\"school_size\", \"staff_shortage\", \"stratio\", \"fund_donation\", \"fund_gov\", \"fund_fees\", \"boy_fraction\"), ~(scale(.) %&gt;% as.vector)) %&gt;%\n  select(-enrol_boys, -enrol_girls)\n\nlsmod &lt;- lm(math ~ fund_gov + fund_fees + fund_donation + boy_fraction + school_size + stratio + public_private + staff_shortage, school_df,\n            na.action=\"na.omit\")\n\ntab_model(lsmod, show.stat=TRUE, show.se = TRUE)\n\n\n\n\n\n\n¬†\nmath\n\n\nPredictors\nEstimates\nstd. Error\nCI\nStatistic\np\n\n\n(Intercept)\n482.77\n1.85\n479.14¬†‚Äì¬†486.39\n261.02\n&lt;0.001\n\n\nfund gov\n5.75\n1.58\n2.65¬†‚Äì¬†8.85\n3.63\n&lt;0.001\n\n\nfund fees\n0.78\n1.79\n-2.73¬†‚Äì¬†4.28\n0.43\n0.664\n\n\nfund donation\n-5.68\n0.86\n-7.37¬†‚Äì¬†-3.98\n-6.57\n&lt;0.001\n\n\nboy fraction\n-7.34\n0.65\n-8.60¬†‚Äì¬†-6.08\n-11.38\n&lt;0.001\n\n\nschool size\n17.89\n0.65\n16.63¬†‚Äì¬†19.16\n27.71\n&lt;0.001\n\n\nstratio\n-18.57\n0.67\n-19.89¬†‚Äì¬†-17.25\n-27.58\n&lt;0.001\n\n\npublic private [public]\n-38.43\n2.14\n-42.63¬†‚Äì¬†-34.23\n-17.92\n&lt;0.001\n\n\nstaff shortage\n-3.70\n0.64\n-4.96¬†‚Äì¬†-2.44\n-5.75\n&lt;0.001\n\n\nObservations\n13150\n\n\nR2 / R2 adjusted\n0.126 / 0.125\n\n\n\n\n\n\n\n\nCode\nlsmod_cr &lt;- coeftest(lsmod, vcov=vcovCL, cluster= ~ country_name)\nlsmod_cr\n\n\n\nt test of coefficients:\n\n                      Estimate Std. Error t value  Pr(&gt;|t|)    \n(Intercept)          482.76622    9.50043 50.8152 &lt; 2.2e-16 ***\nfund_gov               5.75196    4.90990  1.1715  0.241418    \nfund_fees              0.77565    4.51410  0.1718  0.863575    \nfund_donation         -5.67882    1.99402 -2.8479  0.004407 ** \nboy_fraction          -7.33959    1.23390 -5.9483 2.778e-09 ***\nschool_size           17.89333    5.38523  3.3227  0.000894 ***\nstratio              -18.57256    3.93841 -4.7158 2.433e-06 ***\npublic_privatepublic -38.43057    9.01819 -4.2614 2.045e-05 ***\nstaff_shortage        -3.69988    2.68127 -1.3799  0.167641    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n\nWe again apply grouping based correlated error adjustments to our model as seen above for the country level groups.\n\nThere is a nearly collinear relationship in funding sources where fund_fees + fund_donation + fund_gov = 100 unless there is a another nonspecific funding source. This explains why fund_fees is a non-significant predictor. Interestingly, fund_gov is also non-significant since this is likely related to public/private designation.\nWith all other factors being equal, a public school is 38.43 points lower than a private school for math scores.\nSchools with more students have higher average math scores. But as expected, higher student to teacher ratio inversely correlates with score as expected.\nMore boys attending the school seems to proportionally lower math scores for the school! This seems to go against the individual score model where boys seemed to score higher on the test.\nHigher staff shortage in the school negatively influences the school‚Äôs scores but not significantly.\n\nNote: Due to missing values, only a complete dataset of 60% was used in the linear model.\nWe also see some risk of predictor correlations here particularly with respect to funding source and public/private status of school. Additionally, school size is positively correlated to student-teacher ratio.\n\n\nCode\ns_cor_df &lt;- school_df %&gt;%\n  mutate(public_private = ifelse(public_private == \"public\", 0.0, 1.0)) %&gt;%\n  select(-school_id, -math, -country_name) %&gt;%\n  mutate(across(fund_gov:boy_fraction, as.double))\n\nres &lt;- cor(s_cor_df, use = \"complete.obs\", method=\"spearman\") \n\ncorrplot(res, type = \"upper\", order = \"hclust\", tl.col = \"black\", tl.srt = 45)"
  },
  {
    "objectID": "learning/20231012_SmarterKids/index.html#mixed-effects-model",
    "href": "learning/20231012_SmarterKids/index.html#mixed-effects-model",
    "title": "The Smartest Kids in the World",
    "section": "Mixed Effects Model",
    "text": "Mixed Effects Model\nA mixed effects model should be more appropriate here over a simple linear model or a model with design adjustments for these reasons:\n\nWe have hierarchical data (student within a school within a country). Clearly there is student-to-student variability based on the various indicators recorded in this data set. But we also see that groupings play an effect.\nThe design based linear model did not offer insight into how schools and countries differ. It‚Äôs possible that the variability in students may also be accounted for by school-to-school variability and country-to-country variability. We want to know how these grouping variables affect student as well as school-averaged scores.\n\nThe book described the socioeconomic factors for different countries that impacted their approach to education. So we expect these to affect our analysis.\nFor simplicity, I will look at the countries mentioned in the book (USA, South Korea, Poland and Finland) in the year of 2018.\nSince there are correlations in some of the predictors mother_education_level and wealth were removed as predictors. Similarly for lack of interest desk, room, television and car were also excluded. At the school level, we remove fund_gov since it correlates with public/private designation and fund_fees since it is likely collinear and non-significant in the adjusted linear model.\nAlthough, the predictors are correlated, we will lose interpretability by applying dimensionality reduction techniques such as PCA. Hence the above approach is ideal.\n\n\nCode\nsub_math_df &lt;- math_df %&gt;%\n  mutate(\n    gender = ifelse(gender == \"male\", 0.0, 1.0),\n    computer = ifelse(computer == \"yes\", 1.0, 0.0),\n    internet = ifelse(internet == \"yes\", 1.0, 0.0),\n    public_private = ifelse(public_private == \"public\", 0.0, 1.0),\n    desk = ifelse(desk == \"yes\", 1.0, 0.0),\n    room = ifelse(room == \"yes\", 1.0, 0.0),\n    television = ifelse(television == \"yes\", 1.0, 0.0),\n    car = ifelse(car == \"yes\", 1.0, 0.0)\n  ) %&gt;%\n  mutate(boy_fraction = enrol_boys/school_size) %&gt;% \n  select(math, student_id, country_name, \n         mother_educ_level,\n         father_educ_level, gender, \n         computer, internet, \n         desk, room, television, car,\n         n_books, \n         wealth,\n         escs, school_id,\n         fund_gov, fund_fees,\n         fund_donation, \n         boy_fraction,\n         stratio, public_private, staff_shortage, \n         school_size, stu_wgt, sch_wgt) %&gt;%\n  na.omit() %&gt;%\n  filter((country_name %in% c(\"United States\", \"South Korea\",\n                                              \"Poland\", \"Finland\"))) %&gt;%\n  mutate_at(c(\"wealth\", \"escs\",\"school_size\", \"staff_shortage\", \"mother_educ_level\", \"father_educ_level\", \"n_books\",\n              \"fund_donation\", \"fund_gov\", \"fund_fees\", \"stratio\", \"staff_shortage\", \"school_size\", \"boy_fraction\"),\n            ~(scale(., scale=FALSE) %&gt;% as.vector))\n\n\nIf we group schools into public or private so that each country has 2 school levels (1 = private and 0 = public), we see that the classes are vastly imbalanced. More public school data available.\n\n\nCode\ntable(sub_math_df$country_name, sub_math_df$public_private) %&gt;% knitr::kable()\n\n\n\n\n\n\n\n0\n1\n\n\n\n\nFinland\n1560\n72\n\n\nPoland\n4169\n148\n\n\nSouth Korea\n2278\n1495\n\n\nUnited States\n1760\n99\n\n\n\n\n\n\n\n\n\n\nCode\nsub_math_df %&gt;% group_by(country_name) %&gt;% dplyr::summarize(n_schools = n_distinct(school_id)) %&gt;% knitr::kable()\n\n\n\n\n\n\ncountry_name\nn_schools\n\n\n\n\nFinland\n84\n\n\nPoland\n236\n\n\nSouth Korea\n139\n\n\nUnited States\n86\n\n\n\n\n\n\n\n\nescs and gender are interesting to model and likely correlate with other student level variables.\n\n\nCode\nggplot(sub_math_df, aes(x = escs, y = math, color = as.factor(public_private))) +\n  facet_wrap(~country_name) +\n  geom_point(alpha = 0.2, aes(shape = as.factor(gender))) +\n  scale_shape_manual(values = c(3, 16)) +\n  geom_smooth(method = \"lm\", se=FALSE) +\n  ggtitle(\"ESCS positively correlates with math scores\")\n\n\n\n\n\n\n\n\n\nWith the exception of Finland, we see overlap in public/private groupings. So this may not be an effective grouping strategy.\n\n\nCode\nggplot(sub_math_df, aes(x = country_name, y = math, color = gender)) +\n  geom_boxplot() +\n  ggtitle(\"Male/Female Score Distributions by Country\")\n\n\n\n\n\n\n\n\n\n\nStudents in Schools in a Country: 3 Level Model\nHere is a hierarchical model with intercepts varying by countries and by grouping of schools within countries. We are assuming that each predictor influences schools and countries in the same way with identical slopes but random intercepts only for the random effects.\n\nPublic vs Private School Grouping\n\n\nCode\nmod1 &lt;- lmer(math ~ father_educ_level + gender + computer + internet + n_books + escs + (1 | country_name/public_private),\n             #mother_educ_level + desk+ wealth + room + television + car + \n     data=sub_math_df,\n     control=lmerControl(optimizer=\"bobyqa\", optCtrl=list(maxfun=20000)),\n     weights = stu_wgt,\n     REML = FALSE)\n\ntab_model(mod1)\n\n\n\n\n¬†\nmath\n\n\nPredictors\nEstimates\nCI\np\n\n\n(Intercept)\n475.41\n455.57¬†‚Äì¬†495.25\n&lt;0.001\n\n\nfather educ level\n4.27\n1.05¬†‚Äì¬†7.48\n0.009\n\n\ngender\n-8.39\n-11.34¬†‚Äì¬†-5.44\n&lt;0.001\n\n\ncomputer\n20.42\n15.13¬†‚Äì¬†25.71\n&lt;0.001\n\n\ninternet\n22.16\n12.60¬†‚Äì¬†31.72\n&lt;0.001\n\n\nn books\n20.75\n19.22¬†‚Äì¬†22.27\n&lt;0.001\n\n\nescs\n17.27\n15.15¬†‚Äì¬†19.38\n&lt;0.001\n\n\nRandom Effects\n\n\n\nœÉ2\n1044527.24\n\n\n\nœÑ00 public_private:country_name\n129.34\n\n\nœÑ00 country_name\n217.58\n\n\nICC\n0.00\n\n\nN public_private\n2\n\n\nN country_name\n4\n\nObservations\n11581\n\n\nMarginal R2 / Conditional R2\n0.001 / 0.002\n\n\n\n\n\n\nCode\nq &lt;- plot_model(mod1, \n           type  = \"re\", \n           width = .5, \n           show.values = T)\n\ngrid.arrange(q[[1]], q[[2]], ncol=2)\n\n\n\n\n\n\n\n\n\nAs expected access to a computer, internet, more books and high socioeconomic status are positively predictive. Father‚Äôs education is also positively predictive albeit low p-value and smaller effect size.\nLooking at the random effects, private schools perform better than public school with greatest disparity seen in Poland. Controlling for other factors and looking at the ‚Äúcountry‚Äù random effect, Poland and South Korea perform better than Finland. This is surprising because overall South Korea and Finland had higher average scores than Poland. Perhaps Poland‚Äôs lower scores are explained by other predictors such as socioeconomic indicators that are accounted for in the model.\n\n\nIndividual School Groupings\nHere is the mixed effects model grouping by schools within country. Although we are not interested in how individual schools perform, it is nice to understand the variability by school versus countries. We fit two models where the first looks at individual predictors only and the second also includes school level predictors.\n\n\nCode\nmod1 &lt;- lmer(math ~ #mother_educ_level + \n               father_educ_level + gender + computer + internet + \n               # desk + room + television + car + wealth + \n               n_books + escs  + (1 | country_name/school_id),\n     data=sub_math_df,\n     control=lmerControl(optimizer=\"bobyqa\", optCtrl=list(maxfun=50000)),\n     weights = stu_wgt,\n     REML = FALSE)\n\nmod2 &lt;- lmer(math ~ #mother_educ_level + \n               father_educ_level + gender + computer + internet + \n               # desk + room + television + car + wealth + \n               n_books + escs  + \n               school_size + stratio + public_private + boy_fraction +\n               (1 | country_name/school_id),\n     data=sub_math_df,\n     control=lmerControl(optimizer=\"bobyqa\", optCtrl=list(maxfun=50000)),\n     weights = stu_wgt,\n     REML = FALSE)\n\ntab_model(mod1, mod2, show.stat=TRUE, show.aic = TRUE)\n\n\n\n\n¬†\nmath\nmath\n\n\nPredictors\nEstimates\nCI\nStatistic\np\nEstimates\nCI\nStatistic\np\n\n\n(Intercept)\n477.86\n460.85¬†‚Äì¬†494.87\n55.07\n&lt;0.001\n473.80\n453.95¬†‚Äì¬†493.66\n46.78\n&lt;0.001\n\n\nfather educ level\n5.60\n2.39¬†‚Äì¬†8.82\n3.42\n0.001\n5.69\n2.48¬†‚Äì¬†8.90\n3.48\n0.001\n\n\ngender\n-9.34\n-12.27¬†‚Äì¬†-6.41\n-6.25\n&lt;0.001\n-9.77\n-12.73¬†‚Äì¬†-6.80\n-6.45\n&lt;0.001\n\n\ncomputer\n15.70\n10.54¬†‚Äì¬†20.86\n5.97\n&lt;0.001\n15.60\n10.45¬†‚Äì¬†20.76\n5.93\n&lt;0.001\n\n\ninternet\n21.20\n11.95¬†‚Äì¬†30.45\n4.49\n&lt;0.001\n21.34\n12.09¬†‚Äì¬†30.58\n4.52\n&lt;0.001\n\n\nn books\n18.15\n16.64¬†‚Äì¬†19.66\n23.60\n&lt;0.001\n18.20\n16.69¬†‚Äì¬†19.70\n23.67\n&lt;0.001\n\n\nescs\n11.77\n9.66¬†‚Äì¬†13.89\n10.91\n&lt;0.001\n11.57\n9.45¬†‚Äì¬†13.68\n10.71\n&lt;0.001\n\n\nschool size\n\n\n\n\n0.01\n0.00¬†‚Äì¬†0.02\n3.04\n0.002\n\n\nstratio\n\n\n\n\n0.24\n-0.73¬†‚Äì¬†1.20\n0.48\n0.632\n\n\npublic private\n\n\n\n\n22.91\n13.06¬†‚Äì¬†32.76\n4.56\n&lt;0.001\n\n\nboy fraction\n\n\n\n\n-19.25\n-37.07¬†‚Äì¬†-1.43\n-2.12\n0.034\n\n\nRandom Effects\n\n\n\nœÉ2\n936540.03\n936014.23\n\n\n\nœÑ00\n821.52 school_id:country_name\n738.82 school_id:country_name\n\n\n\n187.32 country_name\n294.03 country_name\n\n\nICC\n0.00\n0.00\n\n\nN\n545 school_id\n545 school_id\n\n\n\n4 country_name\n4 country_name\n\nObservations\n11581\n11581\n\n\nMarginal R2 / Conditional R2\n0.001 / 0.002\n0.001 / 0.002\n\n\nAIC\n143749.790\n143721.495\n\n\n\n\n\n\nAs seen before, all the predictors remain significant with positive relationship to scores. Access to a computer, internet, more books and high socioeconomic status are positively predictive . Father‚Äôs education level is also predictive of higher individual scores.\nInterestingly, ICC or intra-class correlation coefficient is 0 in both of these models. This implies that the proportion of variance explained by the grouping structure (schools within a country) is 0 suggesting that a mixed effects model in this case may not be necessary.\nA comparison of these model deviances shows that the difference is indeed significant:\n\n\nCode\nanova(mod1, mod2, refit = FALSE)\n\n\nData: sub_math_df\nModels:\nmod1: math ~ father_educ_level + gender + computer + internet + n_books + escs + (1 | country_name/school_id)\nmod2: math ~ father_educ_level + gender + computer + internet + n_books + escs + school_size + stratio + public_private + boy_fraction + (1 | country_name/school_id)\n     npar    AIC    BIC logLik deviance  Chisq Df Pr(&gt;Chisq)    \nmod1   10 143773 143846 -71876   143753                         \nmod2   14 143746 143849 -71859   143718 34.075  4  7.192e-07 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n\nIncluding the additional variables at the school level likely adds value.\nHere are the random effects for the second model with both individual and school level variables:\n\n\nCode\np1 &lt;- plot_model(mod2, type  = \"re\")[[1]]\nxlabels &lt;- as.character(p1$data$term)\noldxlabels &lt;- xlabels\nfirst_finland &lt;- grep(\"Finland\", xlabels,value = FALSE)[length(grep(\"Finland\", xlabels,value = FALSE))]\nfirst_SK &lt;- grep(\"South Korea\", xlabels,value = FALSE)[length(grep(\"South Korea\", xlabels,value = FALSE))]\nfirst_Poland &lt;- grep(\"Poland\", xlabels,value = FALSE)[length(grep(\"Poland\", xlabels,value = FALSE))]\nfirst_usa &lt;- grep(\"United\", xlabels,value = FALSE)[length(grep(\"United\", xlabels,value = FALSE))]\nxlabels[!seq_along(xlabels) %in% c(first_finland, first_SK, first_Poland, first_usa)] &lt;- \"\"\nnames(xlabels) &lt;- oldxlabels\n\np2 &lt;- plot_model(mod2, type  = \"re\", \n           width = .5, \n           show.values = T)[[2]]\n\ngrid.arrange(p1 + scale_x_discrete(labels = xlabels), p2, ncol=2)\n\n\n\n\n\n\n\n\n\nAmong the random variables, we see that\n\nInter-school variability is pronounced in United States and South Korea.\nThere is a large variability at the country level in Finland unlike USA, South Korea and Poland. Its unclear what accounts for this diversity within the country. However scores across schools are more consistent.\nPoland performs best in terms of the random effect intercept. This is surprising since South Korea and Finland had higher average math scores than Poland. Poland‚Äôs lower average scores are likely explained by other predictors such as socioeconomic indicators that are accounted for in the model.\n\nGoing back to the fact that the model ICC = 0, let‚Äôs consider adding random slopes to see if there may be additional differences we are not seeing.\n\n\nCode\nmod3 &lt;- lmer(math ~ #mother_educ_level + \n               gender + internet + \n               n_books + escs  + \n               stratio + public_private +\n               (escs | country_name)+(1 | country_name:school_id) ,\n     data=sub_math_df,\n     control=lmerControl(optimizer=\"bobyqa\", optCtrl=list(maxfun=50000)),\n     weights = stu_wgt,\n     REML = FALSE)\n\nsummary(mod3)\n\n\nLinear mixed model fit by maximum likelihood  ['lmerMod']\nFormula: \nmath ~ gender + internet + n_books + escs + stratio + public_private +  \n    (escs | country_name) + (1 | country_name:school_id)\n   Data: sub_math_df\nWeights: stu_wgt\nControl: lmerControl(optimizer = \"bobyqa\", optCtrl = list(maxfun = 50000))\n\n     AIC      BIC   logLik deviance df.resid \n143772.7 143861.0 -71874.4 143748.7    11569 \n\nScaled residuals: \n    Min      1Q  Median      3Q     Max \n-10.286  -0.395   0.023   0.422   7.479 \n\nRandom effects:\n Groups                 Name        Variance  Std.Dev. Corr\n country_name:school_id (Intercept)    714.33  26.727      \n country_name           (Intercept)    288.42  16.983      \n                        escs            21.56   4.643  1.00\n Residual                           939216.18 969.132      \nNumber of obs: 11581, groups:  country_name:school_id, 545; country_name, 4\n\nFixed effects:\n               Estimate Std. Error t value\n(Intercept)    481.9614     9.9364  48.505\ngender          -9.0031     1.4935  -6.028\ninternet        28.0830     4.6232   6.074\nn_books         17.8310     0.7687  23.195\nescs            18.8921     2.6136   7.229\nstratio          1.0562     0.3765   2.806\npublic_private  19.0753     4.8979   3.895\n\nCorrelation of Fixed Effects:\n            (Intr) gender intrnt n_boks escs   strati\ngender      -0.076                                   \ninternet    -0.458  0.008                            \nn_books      0.000 -0.037  0.023                     \nescs         0.809  0.009 -0.059 -0.196              \nstratio     -0.040 -0.012  0.027  0.017  0.078       \npublic_prvt -0.073  0.012  0.001 -0.024 -0.018  0.097\noptimizer (bobyqa) convergence code: 0 (OK)\nboundary (singular) fit: see help('isSingular')\n\n\nIn spite of simplifying the model level 1 predictors, we see that there are issues with singularity when we add escs to have a random slope likely because we see a correlation of variances close to 1.0.\n\n\n\nSchools in a Country: 2 Level Model\nNow, we look at school performances by averaging the individual students math scores within schools to get a school score.\n\n\nCode\nschool_df2 &lt;- math_df %&gt;%\n  mutate(\n    public_private = ifelse(public_private == \"public\", 0.0, 1.0)\n  ) %&gt;%\n  mutate(boy_fraction = enrol_boys/school_size) %&gt;% \n  select(math, country_name, school_id,\n         # fund_gov, fund_fees,\n         fund_donation, \n         boy_fraction,\n         stratio, public_private, staff_shortage, \n         school_size, stu_wgt, sch_wgt) %&gt;%\n  na.omit() %&gt;%\n  filter((country_name %in% c(\"United States\", \"South Korea\",\n                                              \"Poland\", \"Finland\"))) %&gt;%\n  mutate_at(c(\"school_size\", \"staff_shortage\", \n              \"fund_donation\", \"stratio\", \"staff_shortage\", \"school_size\", \"boy_fraction\"),\n            ~(scale(., scale=FALSE) %&gt;% as.vector)) %&gt;%\n  group_by(country_name, school_id, fund_donation, boy_fraction, school_size, stratio, public_private, staff_shortage, sch_wgt) %&gt;%\n  dplyr::summarize(math = weighted.mean(math,w=stu_wgt,  na.rm = T)) %&gt;%\n  ungroup()\n  \nsch_mod &lt;- lmer(math ~ fund_donation + boy_fraction + school_size + stratio + public_private + staff_shortage + (1 | country_name),\n     data=school_df2,\n     weights = sch_wgt,\n     REML = FALSE)\n\ntab_model(sch_mod)\n\n\n\n\n¬†\nmath\n\n\nPredictors\nEstimates\nCI\np\n\n\n(Intercept)\n496.00\n470.52¬†‚Äì¬†521.48\n&lt;0.001\n\n\nfund donation\n-2.91\n-4.03¬†‚Äì¬†-1.80\n&lt;0.001\n\n\nboy fraction\n-127.69\n-159.72¬†‚Äì¬†-95.66\n&lt;0.001\n\n\nschool size\n0.01\n-0.00¬†‚Äì¬†0.02\n0.055\n\n\nstratio\n1.17\n-0.21¬†‚Äì¬†2.55\n0.095\n\n\npublic private\n23.56\n9.57¬†‚Äì¬†37.54\n0.001\n\n\nstaff shortage\n1.64\n-3.42¬†‚Äì¬†6.71\n0.524\n\n\nRandom Effects\n\n\n\nœÉ2\n200308.59\n\n\n\nœÑ00 country_name\n558.03\n\n\nICC\n0.00\n\n\nN country_name\n4\n\nObservations\n562\n\n\nMarginal R2 / Conditional R2\n0.004 / 0.007\n\n\n\n\n\n\nCode\nplot_model(sch_mod, type  = \"re\", \n           width = .5, \n           show.values = T)\n\n\n\n\n\n\n\n\n\n\nThe only effect that matters appears to be fund_donation, boy_fraction and public/private. However, school size and student teacher ratio trend towards significance.\nThe country random effect was also very important. Again, Finland showed high variability in school performances.\n\nSince ICC = 0 for these models, it is unclear that the random effects are explaining variance in the data.\n\n\nThe curious case of Finland\nFinland shows uniformity among schools but large variability at the country level. Perhaps we would need to model this with varying slopes for the predictors and how they interact within each school. This unfortunately led to models at/near singularity. Instead I simplified the model by removing the country level and looking at Finland alone grouped by its schools.\n\n\nCode\nfinland_df &lt;- sub_math_df %&gt;% filter(country_name == \"Finland\")\n\nmod_f &lt;- lmer(math ~ father_educ_level + gender + computer + internet + n_books + escs  + \n                (father_educ_level + gender + computer + internet + n_books + escs  | school_id),\n     data=finland_df,\n     control=lmerControl(optimizer=\"bobyqa\", optCtrl=list(maxfun=50000)),\n     weights = stu_wgt, REML=FALSE)\n\ntab_model(mod_f)\n\n\n\n\n¬†\nmath\n\n\nPredictors\nEstimates\nCI\np\n\n\n(Intercept)\n454.25\n387.20¬†‚Äì¬†521.29\n&lt;0.001\n\n\nfather educ level\n12.93\n5.49¬†‚Äì¬†20.37\n0.001\n\n\ngender\n3.87\n-3.53¬†‚Äì¬†11.28\n0.305\n\n\ncomputer\n8.66\n-7.77¬†‚Äì¬†25.08\n0.301\n\n\ninternet\n40.23\n-25.08¬†‚Äì¬†105.54\n0.227\n\n\nn books\n17.33\n12.78¬†‚Äì¬†21.87\n&lt;0.001\n\n\nescs\n15.78\n9.71¬†‚Äì¬†21.85\n&lt;0.001\n\n\nRandom Effects\n\n\n\nœÉ2\n51736.73\n\n\n\nœÑ00 school_id\n4447.67\n\n\nœÑ11 school_id.father_educ_level\n61.32\n\n\nœÑ11 school_id.gender\n63.16\n\n\nœÑ11 school_id.computer\n147.03\n\n\nœÑ11 school_id.internet\n1168.46\n\n\nœÑ11 school_id.n_books\n118.47\n\n\nœÑ11 school_id.escs\n114.39\n\n\nœÅ01\n-0.40\n\n\n\n-0.83\n\n\n\n-0.93\n\n\n\n-0.98\n\n\n\n0.15\n\n\n\n0.28\n\n\nN school_id\n84\n\nObservations\n1632\n\n\nMarginal R2 / Conditional R2\n0.017 / NA\n\n\n\n\n\n\n\n\nCode\nplot_model(mod_f, type  = \"re\") + theme(text = element_text(size=8))\n\n\n\n\n\n\n\n\n\nThis still led to a near singular model because of model complexity\nIf the model is to be trusted, we see that individual variability within schools is high for whether or not one has access to internet. Also surprisingly, unlike the nested countries model, internet was not significantly predictive for math scores in Finland. This highlights a limitation of the modeling approach. Different countries and potentially schools have different responses to each of the predictors. A varying slopes model for each predictor with multiple levels may be ideal but such models fail to converge."
  },
  {
    "objectID": "learning/20231012_SmarterKids/index.html#sec-book",
    "href": "learning/20231012_SmarterKids/index.html#sec-book",
    "title": "The Smartest Kids in the World",
    "section": "Back to the Book",
    "text": "Back to the Book\nHere are some things that stood out to me from the book and may not have been evident from the data models:\n\nExpectations for teacher excellence\n\nFinnish teacher training programs are prestigious and extremely selective (think Georgetown to MIT acceptance rates!) while US teacher programs have a low admission bar.\nKorean Hogwans (private after school college prep tutoring) teachers earn very well and their performance is evaluated by student and parent surveys which in turn determines teacher dismissals\nIn Finland, teachers undergo 1 year of practical training as opposed to 12 - 15 weeks required in USA.\n\nStudent‚Äôs innate drive\n\nIn high pressure environments like Korea, students have an innate drive that is reinforced by parents, peers and culture\nThere is an understanding and expectation of oneself that academics is meaningful and important for future success in life\n\nCurriculum standards\n\nWhen school demands less of kids they lose interest and don‚Äôt take it seriously.\nStandardized tests with reasonable challenge (think harder than SATs) may be useful as a tool to cultivate drive and create manageable pressure along with providing goals and aspirations.\nAmerican schools tend to have lower standards (math is 2 grades below Korean schools!) with a heavy emphasis on sports. This is further emphasized by high standards and the presidential tests. The focus on athletics may drain resources from academics.\nRigor can also be counteracted by trivialized assignments e.g multiple choice questions and poster projects that don‚Äôt promote as much critical thinking\n\nCultural mindsets\n\nKorean society supports their students on the national standardized test day by delaying stock markets to minimize traffic and grounding planes to avoid excessive noise.\nSisu is a cultural mindset in Finland that encapsulates grit, determination, tenacity and resilience in one word.\n\nParental involvement\n\nOddly parent participation in school through volunteer opportunities and PTA roles did not enhance a child‚Äôs learning outcomes\nInstead, activities like daily reading and discussion on a variety of topics to enrich a child‚Äôs learning more directly were beneficial.\nParents serving as coaches rather cheerleaders are more effective by offering authentic and not excessive praise. An authoritative parenting style should foster independence but also enforce firm boundaries.\n\nDistances in teacher-student relationships to preserve rigor\n\nTeachers in Finland actually aim for minimal empathy and no labeling to preserve rigor and avoid such systemic biases.\nIn America, teachers strive to build personal relationships with their students. There is also an effort to foster inclusive environments. But does a blinded approach work better?\n\n\nInterestingly, the above features dominate things like racial disparities and poverty. Oddly, labeling children by race or economic status might have actually impeded an unbiased approach to teaching."
  },
  {
    "objectID": "learning/20231012_SmarterKids/index.html#summary",
    "href": "learning/20231012_SmarterKids/index.html#summary",
    "title": "The Smartest Kids in the World",
    "section": "Summary",
    "text": "Summary\nIt was interesting to dive into the complexities of education systems. I also had an appreciation for the investigative approaches in the book which offered more qualitative findings.\n\nDid my models agree with the book???\nWith the information available, I wasn‚Äôt able to evaluate an individual student‚Äôs personal motivation and attitude towards education. This would have been a very interesting factor to study and correlate with the book‚Äôs findings.\nMy models certainly leaned in the same direction as the book in certain key findings:\n\nThey point towards the importance of academic rigor since predictors such as having computers, access to internet and more books were important for higher scores.\nPerhaps the reason private schools had higher scores may be explained by higher educational standards that foster academic rigor. Although this may also be convoluted by socioeconomic factors!\nThe design based linear models also highlighted the importance of teaching since student-teacher ratio was predictive of a school‚Äôs overall score. This predictor was not significant in mixed models. However, the mixed models may not be as useful since ICC = 0 suggested that observations within country/school groups are no more similar than observations from different groups.\n\nOverall, building systems that beget academic excellence is very challenging. I definitely recommend this book to educators, parents and policy-makers as we can each play a part in motivating a value system reform that instills academic drive at the individual and societal level."
  },
  {
    "objectID": "blogindex.html",
    "href": "blogindex.html",
    "title": "TIL Blog",
    "section": "",
    "text": "Today I learned!\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nThe Smartest Kids in the World\n\n\n\n\n\n\nBook\n\n\nMixed Models\n\n\n\n\n\n\n\n\n\nOct 14, 2023\n\n\nBamini Balaji\n\n\n\n\n\n\n\n\n\n\n\n\nDataKind IMF DataDive\n\n\n\n\n\n\nGeospatial\n\n\nStreamlit\n\n\nPlotly\n\n\n\n\n\n\n\n\n\nOct 4, 2023\n\n\nBamini Balaji\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "learning/20231004_Datakind/index.html",
    "href": "learning/20231004_Datakind/index.html",
    "title": "DataKind IMF DataDive",
    "section": "",
    "text": "Lessons from evaluating risks imposed by climate change to urban settlements"
  },
  {
    "objectID": "learning/20231004_Datakind/index.html#data-dive-092023",
    "href": "learning/20231004_Datakind/index.html#data-dive-092023",
    "title": "DataKind IMF DataDive",
    "section": "Data Dive 09/2023",
    "text": "Data Dive 09/2023\nDataKind is an innovative organization that fosters global collaboration for social good by teaming up social impact organizations with individuals all over the world to build real data solutions to societal probelms. The DataDive events are much like fast-paced high energy hackathons where volunteers collaborate to sketch initial prototypes and help evaluate project feasibility. This was my second DataDive event.\nHere I had a great time volunteering to support a project with the International Monetary Fund (IMF). Over a short 4 day window we collaborated globally across time zones to build pipelines to estimate financial and economic exposure and vulnerabilities of urban settlements at risk from climate hazards.\nHere‚Äôs some things I learned:\n\nUsing the Nominatim API to access OpenStreetMap (OSM) data and reverse geo-code buildings. Reverse geocoding is the process of going from latitude/longitude coordinates to a human readable address.\n\nPROS: The Nominatim API was free for use and even enabled identification of surface and roof materials of structures.\nCONS: Strict usage policy that limits users to single threaded requests at 1 request per second.\n\nGoogle has an incredible Open Buildings dataset with impressive global coverage and accuracy exceeding data in OSM!\nI focused on data from South Africa and Mozambique. Coastal Mozambique is hit with a lot of cyclones yearly, making analyses like these invaluable for safety planning!\nStreamlit is a pretty simple tool for web apps and I can see some advantages over Shiny (previously only R focused) mainly in that it is less verbose. However its focus on simplicity could prove challenging for apps with lot of reactive complexity. Here I used plotly to create interactive geospatial visualizations that map building locations and structure density as well as overlays with past storm traces.\nIf time had permitted, I would have liked to further quantify the impact of flood risks to building covered land areas in various geographic regions.\n\nHere is the code for an app prototype I created to look at storm traces and buildings in South Africa and Mozambique. A simplified version of the app can be seen here, however it occasionally encounters resource limitations while running.\n\n\n\nOverall, this event reminded me of the synergy of deadlines and personal motivation. So many passionate volunteers and a few days to create something led to valuable learnings that can hopefully shape upcoming projects at Data Kind. I‚Äôd love to volunteer on a longer term project in the future with the team!\n\n\n\nCertificate"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Projects",
    "section": "",
    "text": "Coming soon!"
  }
]