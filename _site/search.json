[
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "Hello!",
    "section": "",
    "text": "I am Bamini, chemical engineer, data scientist and lifelong learner. I studied at Caltech and Stanford.\nMy interests are at the intersection of data science and biotechnology. I‚Äôm excited by new tools for computational biology as well as ideas that can be applied towards achieving better health outcomes and equity. On the technical front, I enjoy building vibrant visualizations and predictive models and applying analytics for social good.\nI have worked in digital health and drug discovery and development for oncology and Hepatitis C.\nReach out if you‚Äôd like to connect or collaborate!"
  },
  {
    "objectID": "about.html#interests",
    "href": "about.html#interests",
    "title": "About",
    "section": "Interests",
    "text": "Interests\n\nData visualization and storytelling\nData modeling\nData for good\nDrug development\nHealth equity"
  },
  {
    "objectID": "about.html#education",
    "href": "about.html#education",
    "title": "About",
    "section": "Education",
    "text": "Education\nStanford University | Stanford, CA M.S. in Chemical Engineering\nCalifornia Institute of Technology | Pasadena, CA B.S. in Chemical Engineering"
  },
  {
    "objectID": "posts/post-with-code/index.html",
    "href": "posts/post-with-code/index.html",
    "title": "Learning Deep Learning",
    "section": "",
    "text": "Resources consulted: http://introtodeeplearning.com/ https://see.stanford.edu/course/cs229 https://www.cs.toronto.edu/~lczhang/321/ https://www.cs.toronto.edu/~lczhang/360/ https://distill.pub/2017/momentum/"
  },
  {
    "objectID": "posts/welcome/index.html",
    "href": "posts/welcome/index.html",
    "title": "Welcome To My Blog",
    "section": "",
    "text": "This is the first post in a Quarto blog. Welcome!\n\nSince this post doesn‚Äôt specify an explicit image, the first image in the post will be used in the listing page of posts."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Projects",
    "section": "",
    "text": "Hi there! Thanks for visiting. Here are some of my projects.\n\n\n\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "blogindex.html",
    "href": "blogindex.html",
    "title": "TIL",
    "section": "",
    "text": "Today I learned!\n\n\n\n\n\n\n\n\n  \n\n\n\n\nAnalysis: The Smartest Kids in the World\n\n\n\n\n\n\n\nBook\n\n\nMixed Models\n\n\n\n\n\n\n\n\n\n\n\nOct 14, 2023\n\n\nBamini Balaji\n\n\n\n\n\n\n  \n\n\n\n\nDataKind DataDive (09/2023)\n\n\n\n\n\n\n\nGeospatial\n\n\n\n\n\n\n\n\n\n\n\nOct 4, 2023\n\n\nBamini Balaji\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "learning/20231004_Datakind/index.html",
    "href": "learning/20231004_Datakind/index.html",
    "title": "DataKind DataDive (09/2023)",
    "section": "",
    "text": "I had a great time volunteering in DataKind‚Äôs DataDive event in collaboration with the International Monetary Fund (IMF).\nOver a short 4 day window we collaborated globally across time zones to build pipelines to help estimate financial and economic exposure and vulnerabilities of built-up areas that are at risk to (increasing) climate hazards.\nHere‚Äôs some things I learned:\n\nUsing the Nominatim API to access OpenStreetMap (OSM) data and reverse geo-code buildings and even identify surface and roof materials of structures\nGoogle has an incredible Open Buildings dataset with impressive global coverage and accuracy exceeding data in OSM!\nI focused on data from South Africa and Mozambique. Coastal Mozambique is hit with a lot of cyclones yearly, making analyses like these invaluable for safety planning!\nStreamlit is a pretty simple tool for web apps and I can see some advantages over Shiny (previously only R focused) mainly in that it is less verbose. However its focus on simplicity could prove challenging for apps with lot of reactive complexity.\n\nHere is a simple app prototype I created to look at storm traces and buildings in South Africa and Mozambique.\n\n\n\nStreamlit\n\n\n\n\n\nCertificate"
  },
  {
    "objectID": "learning/20231012_SmarterKids/index.html",
    "href": "learning/20231012_SmarterKids/index.html",
    "title": "Analysis: The Smartest Kids in the World",
    "section": "",
    "text": "I recently read ‚ÄúThe Smartest Kids in the World and how they got that way‚Äù by Amanda Ripley.\nSo is there some kind of a trick to intelligence and education? The more I read, I realized the findings agreed with my personal experiences learning in school systems within and outside of the United States.\nInterestingly, certain key features paved the way pushing countries like Finland, South Korea, Poland and Singapore to improve education outcomes - all while United States lags behind."
  },
  {
    "objectID": "learning/20231012_SmarterKids/index.html#how-did-ripley-quantify-smart",
    "href": "learning/20231012_SmarterKids/index.html#how-did-ripley-quantify-smart",
    "title": "Analysis: The Smartest Kids in the World",
    "section": "How did Ripley quantify ‚Äúsmart‚Äù?",
    "text": "How did Ripley quantify ‚Äúsmart‚Äù?\nThe PISA is an international standardized test that assesses 15 year old student‚Äôs reading, math and science and also surveys their attitudes and backgrounds.\nLuckily some of this data is available in an r package learningtower. So I wanted to dive into the data and see for myself. Also, this was a great excuse to practice some mixed effects modeling üòÄ\n\n\nCode\nlibrary(tidyverse)\nlibrary(tidymodels)\nlibrary(learningtower)\nlibrary(plotly)\nlibrary(Hmisc)\nlibrary(lme4)\nlibrary(sjPlot)\n\nall_student &lt;- load_student(\"all\")\ndata(\"school\")\ndata(\"countrycode\")\n\n\nschool_student &lt;- left_join(\n  all_student, \n  school, \n  by = c(\"school_id\", \"country\", \"year\")) %&gt;%\n  left_join(\n    countrycode,\n    by = \"country\"\n  )\n\n# Selecting a few countries \ncountries &lt;- c(\n  \"Brazil\", \"South Korea\", \"Japan\", \"United States\",\n  \"Canada\", \"Singapore\", \"Malaysia\", \n  \"Finland\", \"Denmark\", \"Peru\",\n  \"Poland\", \"Germany\"\n)"
  },
  {
    "objectID": "learning/20231012_SmarterKids/index.html#exploring-the-data",
    "href": "learning/20231012_SmarterKids/index.html#exploring-the-data",
    "title": "Analysis: The Smartest Kids in the World",
    "section": "Exploring the data",
    "text": "Exploring the data\nHere are the PISA scores for countries with mostly complete datasets.\n\n\nCode\ndf &lt;- school_student %&gt;%\n  select(year, country_name, math, read, science, stu_wgt) %&gt;%\n  pivot_longer(cols = c(\"math\", \"read\", \"science\"), names_to = \"subject\", values_to = \"scores\") %&gt;%\n  #filter(subject == \"math\") %&gt;%\n  filter(!is.na(scores)) %&gt;%\n  filter(year %in% c(2006, 2009, 2012, 2015, 2018)) %&gt;% \n  group_by(country_name, subject) %&gt;%\n  filter(n_distinct(year) == 5) %&gt;%\n  ungroup() %&gt;% # Selecting countries with complete timelines\n  group_by(country_name, year, subject) %&gt;%\n  dplyr::summarize(\n    mean_score = weighted.mean(scores, w=stu_wgt),\n    sd_score = sqrt(Hmisc::wtd.var(scores, weights=stu_wgt))\n  ) %&gt;%\n  ungroup() %&gt;%\n  mutate(\n    lower = mean_score-sd_score,\n    upper = mean_score+sd_score\n  )\n  \ndf$country_name = reorder(df$country_name, df$mean_score, mean)\ndf$country_name &lt;- droplevels(df$country_name)\np_yr &lt;- df %&gt;% \n  ggplot(aes(x = country_name, y = mean_score, color = year)) +\n  geom_point(position = position_dodge(width = .5)) +\n  geom_errorbar(aes(ymin = lower, ymax = upper), position=position_dodge(width = .5)) +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +\n  ggtitle(\"Global Scores by Subject\") +\n  xlab(\"Country\") +\n  ylab(\"Mean Score +/- 1 SD\") + \n  theme(legend.position=\"top\") + \n  facet_wrap(~subject, nrow=3, scales=\"free_y\")\n\nggplotly(p_yr)\n\n\n\n\n\n\n\n\nCode\np &lt;- school_student %&gt;%\n  select(year, country_name, math, read, science, stu_wgt) %&gt;%\n  group_by(year, country_name) %&gt;%\n  dplyr::summarize(math = weighted.mean(math, w=stu_wgt), \n            read = weighted.mean(read, w=stu_wgt), \n            science = weighted.mean(science, w=stu_wgt)) %&gt;%\n  pivot_longer(cols = c(\"math\", \"read\", \"science\"), names_to = \"subject\", values_to = \"scores\") %&gt;%\n  ungroup() %&gt;%\n  filter(country_name %in% countries) %&gt;%\n  mutate(year = as.numeric(as.character(year))) %&gt;%\n  ggplot(aes(x = year, y = scores, color = country_name)) +\n  facet_wrap(~subject) + geom_point() + geom_line()\n\nggplotly(p)"
  },
  {
    "objectID": "learning/20231012_SmarterKids/index.html#quantifying-smartness-using-data",
    "href": "learning/20231012_SmarterKids/index.html#quantifying-smartness-using-data",
    "title": "Analysis: The Smartest Kids in the World",
    "section": "Quantifying smartness using data",
    "text": "Quantifying smartness using data\n\nModeling Individual Scores\nFocusing on the math dataset for year 2018, first I cleaned up some of the variables.\n\n\nCode\nmath_df &lt;- school_student %&gt;%\n  filter(!is.na(math) & year == 2018) %&gt;%\n  mutate(television = as.character(television), computer = as.character(computer),\n         car = as.character(car)) %&gt;%\n  mutate(television = ifelse(television %in% c(\"1\", \"2\", \"3+\"), \"yes\", television)) %&gt;%\n  mutate(car = ifelse(car %in% c(\"1\", \"2\", \"3+\"), \"yes\", car)) %&gt;%\n  mutate(computer = ifelse(((is.na(computer)) & (computer_n %in% c(\"1\", \"2\", \"3+\"))), \"yes\", computer)) %&gt;%\n  mutate(\n    n_books = case_when(\n      book == \"0-10\" ~ 0,\n      book == \"11-25\" ~ 1,\n      book == \"26-100\" ~ 2,\n      book == \"201-500\" ~ 3,\n      book == \"more than 500\" ~ 4\n    ),\n    mother_educ_level = case_when(\n      mother_educ == \"less than ISCED1\" ~ 0,\n      mother_educ == \"ISCED 1\" ~ 1,\n      mother_educ == \"ISCED 2\" ~ 2,\n      mother_educ == \"ISCED 3A\" ~ 3,\n      mother_educ == \"ISCED 3B, C\" ~ 3,\n    ),\n    father_educ_level = case_when(\n      father_educ == \"less than ISCED1\" ~ 0,\n      father_educ == \"ISCED 1\" ~ 1,\n      father_educ == \"ISCED 2\" ~ 2,\n      father_educ == \"ISCED 3A\" ~ 3,\n      father_educ == \"ISCED 3B, C\" ~ 3,\n    )\n  )\n\n\nAt the individual student level, we see the variables mother_educ, father_educ, gender, computer, internet, desk, room, television, car, book, wealth, escs.\nI chose to convert ordered categorical variables such as number of books and mother/father education levels to numerical values for ease of modeling and interpretation. I also converted television, car and computer to binary values to indicate whether or not they were accessible rather than retaining the number of each that was available.\nAnd a simple linear model here shows that all of these may be predictive of a student‚Äôs math scores.\n\n\nCode\nlm_df &lt;- math_df %&gt;%\n  mutate_at(c(\"wealth\", \"escs\",\"school_size\", \"staff_shortage\"),\n            ~(scale(.) %&gt;% as.vector)) %&gt;%\n  mutate(boy_fraction = enrol_boys/school_size) %&gt;%\n  select(math, mother_educ_level, father_educ_level, gender, computer, internet, desk, room, television, car, n_books, wealth, escs)\n\nlmod &lt;- (lm(math ~ ., lm_df, na.action=\"na.omit\"))\n\nsummary(lmod)\n\n\n\nCall:\nlm(formula = math ~ ., data = lm_df, na.action = \"na.omit\")\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-414.97  -60.41    0.19   60.64  412.78 \n\nCoefficients:\n                  Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)       325.0641     1.4457 224.843  &lt; 2e-16 ***\nmother_educ_level   3.3248     0.2372  14.019  &lt; 2e-16 ***\nfather_educ_level   3.8269     0.2324  16.466  &lt; 2e-16 ***\ngendermale          7.4004     0.2707  27.337  &lt; 2e-16 ***\ncomputeryes        22.7090     0.4192  54.169  &lt; 2e-16 ***\ninternetyes        24.9187     0.5685  43.832  &lt; 2e-16 ***\ndeskyes            19.3551     0.4462  43.381  &lt; 2e-16 ***\nroomyes            -2.6047     0.3637  -7.161 8.00e-13 ***\ntelevisionyes      18.7530     1.0548  17.778  &lt; 2e-16 ***\ncaryes              5.7656     0.4126  13.976  &lt; 2e-16 ***\nn_books            22.9178     0.1364 167.989  &lt; 2e-16 ***\nwealth             -1.7290     0.2258  -7.658 1.89e-14 ***\nescs               16.4413     0.2542  64.675  &lt; 2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 89.86 on 443058 degrees of freedom\n  (163556 observations deleted due to missingness)\nMultiple R-squared:  0.2337,    Adjusted R-squared:  0.2336 \nF-statistic: 1.126e+04 on 12 and 443058 DF,  p-value: &lt; 2.2e-16\n\n\nNote: Due to missing values, only a complete dataset of 73% was used in the linear model.\n\nIt‚Äôs understandable that parent‚Äôs education may affect family attitudes towards the importance of academics.\nPerhaps presence of computer, internet, desk, room, TV, car, books and wealth are indicators of socioconomic status. Some of these may also affect a student‚Äôs ability to learn from home. Furthermore, the escs or index of economic, social and cultural status likely represents these variables too.\nGender does seem predictive of the score. If all other factors are equal, a boy would have a score higher by 7.4 points in math!\nIt‚Äôs important to note that these predictive variables are not necessarily independent. For example wealth is correlated with escs as seen below. Additionally, students whose mothers are more educated seem to also have more books. Both parents also likely have similar education backgrounds.\n\n\n\nCode\nggplot(lm_df %&gt;% na.omit(), aes(x = wealth, y = escs)) +\n  geom_point(alpha=0.05) +\n  geom_smooth(method = \"lm\")\n\n\n\n\n\nCode\nggplot(lm_df %&gt;% na.omit(), \n       aes(x = as.factor(mother_educ_level), y = as.factor(n_books))) +\n    geom_bin_2d() +\n  labs(x = \"Mother Education Level\", y = \"Number of books\")\n\n\n\n\n\nCode\nggplot(lm_df %&gt;% na.omit(), \n       aes(x = as.factor(mother_educ_level), y = as.factor(father_educ_level))) +\n    geom_bin_2d() +\n  labs(x = \"Mother Education Level\", y = \"Father Education Level\")\n\n\n\n\n\nThis suggests there is a risk of multicollinearity. Here is the evaluation of variance inflation. It shows that escs and wealth have high VIF.\n\n\nCode\ncar::vif(lmod)\n\n\nmother_educ_level father_educ_level            gender          computer \n         1.691089          1.649123          1.005247          1.447836 \n         internet              desk              room        television \n         1.424581          1.167456          1.123837          1.047353 \n              car           n_books            wealth              escs \n         1.453686          1.382972          2.810157          3.543222 \n\n\n\n\nModeling School Averaged Scores\nAt the school level, we see the variables fund_gov, fund_fees, fund_donation, enrol_boys, enrol_girls, stratio, public_private, staff_shortage, sch_wgt, school_size. And a simple linear model here shows that most of these may be predictive of better school outcomes.\n\n\nCode\nschool_df &lt;- math_df %&gt;%\n  group_by(school_id, fund_gov, fund_fees, fund_donation, enrol_boys, enrol_girls, school_size, stratio, public_private, staff_shortage) %&gt;%\n  dplyr::summarize(math = weighted.mean(math,w=stu_wgt,  na.rm = T)) %&gt;%\n  ungroup() %&gt;%\n  mutate(\n    boy_fraction = enrol_boys/school_size\n  ) %&gt;%\n  mutate_at(c(\"school_size\", \"staff_shortage\"), ~(scale(.) %&gt;% as.vector)) %&gt;%\n  select(-enrol_boys, -enrol_girls)\n\nlsmod &lt;- lm(math ~ ., school_df %&gt;% select(-school_id), na.action=\"na.omit\")\n\nsummary(lsmod)\n\n\n\nCall:\nlm(formula = math ~ ., data = school_df %&gt;% select(-school_id), \n    na.action = \"na.omit\")\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-315.994  -51.379    0.347   48.551  289.555 \n\nCoefficients:\n                      Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)          517.45617    5.83005  88.757  &lt; 2e-16 ***\nfund_gov               0.19073    0.05249   3.634 0.000281 ***\nfund_fees              0.02534    0.05835   0.434 0.664159    \nfund_donation         -0.60427    0.09199  -6.569 5.26e-11 ***\nschool_size           17.89333    0.64563  27.714  &lt; 2e-16 ***\nstratio               -1.98167    0.07186 -27.576  &lt; 2e-16 ***\npublic_privatepublic -38.43057    2.14473 -17.919  &lt; 2e-16 ***\nstaff_shortage        -3.69988    0.64322  -5.752 9.01e-09 ***\nboy_fraction         -43.26838    3.80328 -11.377  &lt; 2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 72.59 on 13141 degrees of freedom\n  (8602 observations deleted due to missingness)\nMultiple R-squared:  0.1257,    Adjusted R-squared:  0.1252 \nF-statistic: 236.2 on 8 and 13141 DF,  p-value: &lt; 2.2e-16\n\n\n\nFunding from fees does not affect test scores. In fact, the source of funding whether it is fees, government or donations seems to only weakly influence test scores.\nWith all other factors being equal, a public school is 38.43 points lower than a private school for math scores.\nSchools with more students have higher average math scores. But as expected, higher student to teacher ratio inversely correlates with score as expected.\nMore boys attending the school seems to proportionally lower math scores for the school! This seems to go against the individual score model where boys seemed to score higher on the test.\nHigher staff shortage in the school negatively influences the school‚Äôs scores.\n\nNote: Due to missing values, only a complete dataset of 60% was used in the linear model."
  },
  {
    "objectID": "learning/20231012_SmarterKids/index.html#mixed-effects-model",
    "href": "learning/20231012_SmarterKids/index.html#mixed-effects-model",
    "title": "Analysis: The Smartest Kids in the World",
    "section": "Mixed Effects Model",
    "text": "Mixed Effects Model\nHere‚Äôs a chance to try a mixed effects model. The reason is that we have hierarchical data (student within a school within a country). Clearly there is student-to-student variability based on the various indicators recorded in this data set. But there may also be school-to-school variability and country-to-country variability.\nThe above linear models did not consider the impact of school and country towards an individuals test scores. The book described the socioeconomic factors for different countries that impacted their approach to education. So we expect these to affect our analysis.\nFor simplicity, we will look at the countries mentioned in the book in the year of 2018.\n\n\nCode\nsub_math_df &lt;- math_df %&gt;%\n  select(math, student_id, country_name, \n         mother_educ_level, father_educ_level,gender, \n         computer, internet, desk, room, television, car, \n         n_books, wealth, escs, school_id,\n         fund_gov, fund_fees, fund_donation, \n         enrol_boys, enrol_girls,\n         stratio, public_private, staff_shortage, \n         school_size, stu_wgt, sch_wgt) %&gt;%\n  na.omit() %&gt;%\n  filter((country_name %in% c(\"United States\", \"South Korea\",\n                                              \"Poland\", \"Finland\", \"Singapore\"))) %&gt;% \n  mutate_at(c(\"wealth\", \"escs\",\"school_size\", \"staff_shortage\"),\n            ~(scale(.) %&gt;% as.vector)) %&gt;%\n  mutate(boy_fraction = enrol_boys/school_size)\n\n\nFirst, lets group schools into public or private so that each country has 2 school levels. This is with the caveat that there is more public school data available.\n\n\nCode\ntable(sub_math_df$country_name, sub_math_df$public_private) %&gt;% knitr::kable()\n\n\n\n\n\n\nprivate\npublic\n\n\n\n\nFinland\n72\n1560\n\n\nPoland\n148\n4169\n\n\nSouth Korea\n1322\n2278\n\n\nUnited States\n99\n1760\n\n\n\n\n\nCode\nsub_math_df %&gt;% group_by(country_name) %&gt;% dplyr::summarize(n_schools = n_distinct(school_id)) %&gt;% knitr::kable()\n\n\n\n\n\ncountry_name\nn_schools\n\n\n\n\nFinland\n84\n\n\nPoland\n236\n\n\nSouth Korea\n133\n\n\nUnited States\n86\n\n\n\n\n\ngender and escs are interesting to model and likely correlate with other student level variables.\n\n\nCode\nggplot(sub_math_df, aes(x = escs, y = math, color = public_private)) +\n  facet_wrap(~country_name) +\n  geom_point(alpha = 0.2, aes(shape = gender)) +\n  scale_shape_manual(values = c(3, 16)) +\n  geom_smooth(method = \"lm\", se=FALSE)\n\n\n\n\n\nCode\nggplot(sub_math_df, aes(x = gender, y = math, color = public_private)) +\n  facet_wrap(~country_name) +\n  geom_boxplot()\n\n\n\n\n\n\nStudents in a Schools in a Country\nHere is a hierarchical model with intercepts varying by countries and by grouping of public/private schools within countries. We are assuming that each predictor influences schools and countries in the same way with identical slopes for the random effects.\n\n\nCode\nmod1 &lt;- lmer(math ~ mother_educ_level + father_educ_level + gender + computer + internet + desk + room + television + car + n_books + wealth + escs + (1 | country_name/public_private),\n     data=sub_math_df,\n     weights = stu_wgt,\n     REML = FALSE)\n\nsummary(mod1)\n\n\nLinear mixed model fit by maximum likelihood  ['lmerMod']\nFormula: math ~ mother_educ_level + father_educ_level + gender + computer +  \n    internet + desk + room + television + car + n_books + wealth +  \n    escs + (1 | country_name/public_private)\n   Data: sub_math_df\nWeights: stu_wgt\n\n     AIC      BIC   logLik deviance df.resid \n142400.2 142517.6 -71184.1 142368.2    11392 \n\nScaled residuals: \n    Min      1Q  Median      3Q     Max \n-7.9702 -0.4025  0.0129  0.4200  6.8580 \n\nRandom effects:\n Groups                      Name        Variance  Std.Dev.\n public_private:country_name (Intercept)     126.3   11.24 \n country_name                (Intercept)     159.6   12.63 \n Residual                                1046166.6 1022.82 \nNumber of obs: 11408, groups:  public_private:country_name, 8; country_name, 4\n\nFixed effects:\n                   Estimate Std. Error t value\n(Intercept)       386.17028   14.14918  27.293\nmother_educ_level   5.07801    1.91328   2.654\nfather_educ_level   1.71605    1.76682   0.971\ngendermale          8.86216    1.51606   5.846\ncomputeryes        23.13003    2.74889   8.414\ninternetyes        28.38366    4.94810   5.736\ndeskyes            -0.04279    2.17079  -0.020\nroomyes            -7.13012    2.40805  -2.961\ntelevisionyes       1.83794    7.79891   0.236\ncaryes             16.50023    4.70856   3.504\nn_books            20.66546    0.78622  26.285\nwealth             -6.40397    0.88454  -7.240\nescs               18.49780    1.15546  16.009\n\n\nCode\nplot_model(mod1, \n           type  = \"re\", \n           width = .5, \n           show.values = T)\n\n\n[[1]]\n\n\n\n\n\n\n[[2]]\n\n\n\n\n\nIn general, private schools perform better than public school with greatest disparity seen in Poland.\nSince private schools are poorly represented in the data, here is the mixed effects model grouping by schools within country.\n\n\nCode\nmod2 &lt;- lmer(math ~mother_educ_level + father_educ_level + gender + computer + internet + desk + room + television + car + n_books + wealth + escs  + (1 | country_name/school_id),\n     data=sub_math_df,\n     weights = stu_wgt,\n     REML = FALSE)\n\nsummary(mod2)\n\n\nLinear mixed model fit by maximum likelihood  ['lmerMod']\nFormula: math ~ mother_educ_level + father_educ_level + gender + computer +  \n    internet + desk + room + television + car + n_books + wealth +  \n    escs + (1 | country_name/school_id)\n   Data: sub_math_df\nWeights: stu_wgt\n\n     AIC      BIC   logLik deviance df.resid \n141659.6 141777.1 -70813.8 141627.6    11392 \n\nScaled residuals: \n     Min       1Q   Median       3Q      Max \n-10.3804  -0.3913   0.0217   0.4188   7.4184 \n\nRandom effects:\n Groups                 Name        Variance Std.Dev.\n school_id:country_name (Intercept)    816.4  28.57  \n country_name           (Intercept)    140.6  11.86  \n Residual                           938492.8 968.76  \nNumber of obs: 11408, groups:  school_id:country_name, 539; country_name, 4\n\nFixed effects:\n                  Estimate Std. Error t value\n(Intercept)       387.6185    13.0992  29.591\nmother_educ_level   7.4861     1.8616   4.021\nfather_educ_level   2.1469     1.7455   1.230\ngendermale          9.3789     1.5035   6.238\ncomputeryes        18.6353     2.6747   6.967\ninternetyes        27.1466     4.7992   5.657\ndeskyes            -3.6819     2.1212  -1.736\nroomyes            -3.2317     2.3617  -1.368\ntelevisionyes       6.3657     7.5070   0.848\ncaryes              8.6404     4.5724   1.890\nn_books            18.1842     0.7759  23.436\nwealth             -5.8865     0.8849  -6.653\nescs               13.1967     1.1507  11.468\n\n\n\n\nCode\np1 &lt;- plot_model(mod2, type  = \"re\")[[1]]\nxlabels &lt;- as.character(p1$data$term)\noldxlabels &lt;- xlabels\nfirst_finland &lt;- grep(\"Finland\", xlabels,value = FALSE)[length(grep(\"Finland\", xlabels,value = FALSE))]\nfirst_SK &lt;- grep(\"South Korea\", xlabels,value = FALSE)[length(grep(\"South Korea\", xlabels,value = FALSE))]\nfirst_Poland &lt;- grep(\"Poland\", xlabels,value = FALSE)[length(grep(\"Poland\", xlabels,value = FALSE))]\nfirst_usa &lt;- grep(\"United\", xlabels,value = FALSE)[length(grep(\"United\", xlabels,value = FALSE))]\nxlabels[!seq_along(xlabels) %in% c(first_finland, first_SK, first_Poland, first_usa)] &lt;- \"\"\nnames(xlabels) &lt;- oldxlabels\np1 + scale_x_discrete(labels = xlabels)\n\n\n\n\n\n\n\nCode\np2 &lt;- plot_model(mod2, type  = \"re\", \n           width = .5, \n           show.values = T)[[2]]\n\np2\n\n\n\n\n\nHere are the coefficients and significance for the model grouped by public vs.¬†private (left) and grouped by individual school (right) within the country grouping.\n\n\nCode\ntab_model(mod1, mod2, show.aic = TRUE)\n\n\n\n\n\n¬†\nmath\nmath\n\n\nPredictors\nEstimates\nCI\np\nEstimates\nCI\np\n\n\n(Intercept)\n386.17\n358.44¬†‚Äì¬†413.91\n&lt;0.001\n387.62\n361.94¬†‚Äì¬†413.30\n&lt;0.001\n\n\nmother educ level\n5.08\n1.33¬†‚Äì¬†8.83\n0.008\n7.49\n3.84¬†‚Äì¬†11.14\n&lt;0.001\n\n\nfather educ level\n1.72\n-1.75¬†‚Äì¬†5.18\n0.331\n2.15\n-1.27¬†‚Äì¬†5.57\n0.219\n\n\ngender [male]\n8.86\n5.89¬†‚Äì¬†11.83\n&lt;0.001\n9.38\n6.43¬†‚Äì¬†12.33\n&lt;0.001\n\n\ncomputer [yes]\n23.13\n17.74¬†‚Äì¬†28.52\n&lt;0.001\n18.64\n13.39¬†‚Äì¬†23.88\n&lt;0.001\n\n\ninternet [yes]\n28.38\n18.68¬†‚Äì¬†38.08\n&lt;0.001\n27.15\n17.74¬†‚Äì¬†36.55\n&lt;0.001\n\n\ndesk [yes]\n-0.04\n-4.30¬†‚Äì¬†4.21\n0.984\n-3.68\n-7.84¬†‚Äì¬†0.48\n0.083\n\n\nroom [yes]\n-7.13\n-11.85¬†‚Äì¬†-2.41\n0.003\n-3.23\n-7.86¬†‚Äì¬†1.40\n0.171\n\n\ntelevision [yes]\n1.84\n-13.45¬†‚Äì¬†17.13\n0.814\n6.37\n-8.35¬†‚Äì¬†21.08\n0.396\n\n\ncar [yes]\n16.50\n7.27¬†‚Äì¬†25.73\n&lt;0.001\n8.64\n-0.32¬†‚Äì¬†17.60\n0.059\n\n\nn books\n20.67\n19.12¬†‚Äì¬†22.21\n&lt;0.001\n18.18\n16.66¬†‚Äì¬†19.71\n&lt;0.001\n\n\nwealth\n-6.40\n-8.14¬†‚Äì¬†-4.67\n&lt;0.001\n-5.89\n-7.62¬†‚Äì¬†-4.15\n&lt;0.001\n\n\nescs\n18.50\n16.23¬†‚Äì¬†20.76\n&lt;0.001\n13.20\n10.94¬†‚Äì¬†15.45\n&lt;0.001\n\n\nRandom Effects\n\n\n\nœÉ2\n1046166.60\n938492.77\n\n\n\nœÑ00\n126.31 public_private:country_name\n816.36 school_id:country_name\n\n\n\n159.56 country_name\n140.63 country_name\n\n\nICC\n0.00\n0.00\n\n\nN\n2 public_private\n539 school_id\n\n\n\n4 country_name\n4 country_name\n\nObservations\n11408\n11408\n\n\nMarginal R2 / Conditional R2\n0.001 / 0.002\n0.001 / 0.002\n\n\nAIC\n142354.939\n141615.104\n\n\n\n\n\n\n\nThis confirms that socioeconomic factors play a critical role in the PISA math scores. Surprisingly the parent‚Äôs education levels may matter less. Most significant predictors included gender as well as books, computer and internet access. Clearly books, computer and internet access impact the quality of education along with socioeconomic factors that may enable this. Oddly wealth negatively correlates with scores while escs positively correlates with score.\nDespite the added complexity of groupings by schools within a country, we see that this model has a lower AIC than grouping by private/public schools suggesting that the random effect of school offers more useful information than public vs.¬†private.\nAdditionally, we see that intra-school variability in individuals is higher in Finland but inter-school variability is lower. In contrast, choice of school affects scores much more profoundly in United States.\nThere is a large variability at the country level in Finland unlike USA, South Korea and Poland. Its unclear what accounts for this diversity within the country.\n\n\n\nSchools in a Country\nNow, we look at school level predictors by averaging the individual students data within schools.\n\n\nCode\nschool_df2 &lt;- sub_math_df %&gt;%\n  group_by(country_name, school_id, fund_gov, fund_fees, fund_donation, boy_fraction, school_size, stratio, public_private, staff_shortage, sch_wgt) %&gt;%\n  dplyr::summarize(math = weighted.mean(math,w=stu_wgt,  na.rm = T)) %&gt;%\n  ungroup()\n  \nsch_mod &lt;- lmer(math ~ fund_gov + fund_fees + fund_donation + boy_fraction + school_size + stratio + public_private + staff_shortage + (1 | country_name),\n     data=school_df2,\n     weights = sch_wgt,\n     REML = FALSE)\n\ntab_model(sch_mod)\n\n\n\n\n\n¬†\nmath\n\n\nPredictors\nEstimates\nCI\np\n\n\n(Intercept)\n507.45\n437.97¬†‚Äì¬†576.93\n&lt;0.001\n\n\nfund gov\n-0.30\n-0.85¬†‚Äì¬†0.25\n0.282\n\n\nfund fees\n0.17\n-0.44¬†‚Äì¬†0.79\n0.576\n\n\nfund donation\n0.82\n-0.57¬†‚Äì¬†2.22\n0.247\n\n\nboy fraction\n0.00\n-0.00¬†‚Äì¬†0.00\n0.492\n\n\nschool size\n6.05\n-1.47¬†‚Äì¬†13.57\n0.114\n\n\nstratio\n1.72\n0.34¬†‚Äì¬†3.10\n0.015\n\n\npublic private [public]\n1.08\n-20.80¬†‚Äì¬†22.95\n0.923\n\n\nstaff shortage\n3.46\n-1.44¬†‚Äì¬†8.36\n0.166\n\n\nRandom Effects\n\n\n\nœÉ2\n171787.11\n\n\n\nœÑ00 country_name\n946.62\n\n\nICC\n0.01\n\n\nN country_name\n4\n\nObservations\n539\n\n\nMarginal R2 / Conditional R2\n0.003 / 0.008\n\n\n\n\n\n\nCode\nplot_model(sch_mod, type  = \"re\")\n\n\n\n\n\n\nThe only effect that matters appears to be student-teacher ratio. School funding sources and boy-girl ratio didn‚Äôt affect school outcomes in math scores. If we ignore p &lt; 0.05 threshold, it‚Äôs clear that school size and staff shortages trend towards significantly affecting school scores.\nThe country random effect was also very important. Again, Finland showed high variability in school performances.\n\n\n\nThe curious case of Finland\nFinland shows uniformity among schools but large variability at the country level. Perhaps we would need to model this with varying slopes for the predictors and how they interact within each school. This unfortunately led to models at/near singularity. Instead I simplified the model by removing the country level and looking at Finland alone grouped by its schools.\n\n\nCode\nfinland_df &lt;- sub_math_df %&gt;% filter(country_name == \"Finland\")\n\nmod_f &lt;- lmer(math ~mother_educ_level + father_educ_level + gender + computer + internet + desk + room + television + car + n_books + wealth + escs  + \n                (mother_educ_level + father_educ_level + gender + computer + internet + desk + room + television + car + n_books + wealth + escs  | school_id),\n     data=finland_df,\n     weights = stu_wgt, REML=FALSE)\n\nsummary(mod_f)\n\n\nLinear mixed model fit by maximum likelihood  ['lmerMod']\nFormula: math ~ mother_educ_level + father_educ_level + gender + computer +  \n    internet + desk + room + television + car + n_books + wealth +  \n    escs + (mother_educ_level + father_educ_level + gender +  \n    computer + internet + desk + room + television + car + n_books +  \n    wealth + escs | school_id)\n   Data: finland_df\nWeights: stu_wgt\n\n     AIC      BIC   logLik deviance df.resid \n 18867.9  19434.6  -9328.9  18657.9     1527 \n\nScaled residuals: \n    Min      1Q  Median      3Q     Max \n-3.2404 -0.6456  0.0573  0.6622  3.0667 \n\nRandom effects:\n Groups    Name              Variance Std.Dev. Corr                         \n school_id (Intercept)        8302.34  91.117                               \n           mother_educ_level   314.06  17.722  -0.35                        \n           father_educ_level    57.50   7.583  -0.67 -0.14                  \n           gendermale          313.03  17.693  -0.36 -0.35  0.52            \n           computeryes         519.31  22.788  -0.53  0.90  0.08 -0.08      \n           internetyes        2684.98  51.817  -0.01 -0.30  0.10 -0.52 -0.49\n           deskyes             717.65  26.789  -0.06 -0.61  0.15  0.21 -0.74\n           roomyes             656.33  25.619   0.10 -0.41 -0.40  0.35 -0.28\n           televisionyes       404.77  20.119  -0.55  0.03  0.00  0.22  0.25\n           caryes             4255.13  65.231  -0.33  0.25  0.48  0.71  0.45\n           n_books             149.97  12.246  -0.12 -0.64  0.20  0.24 -0.35\n           wealth              165.09  12.849   0.46  0.17 -0.05 -0.63 -0.06\n           escs                 61.47   7.840   0.29  0.06 -0.67  0.19 -0.08\n Residual                    47156.47 217.155                               \n                                          \n                                          \n                                          \n                                          \n                                          \n                                          \n                                          \n  0.61                                    \n -0.20  0.29                              \n -0.05  0.07  0.68                        \n -0.78 -0.39 -0.20 -0.16                  \n  0.21  0.23  0.57  0.63 -0.30            \n  0.31 -0.26 -0.82 -0.84 -0.16 -0.50      \n -0.41  0.17  0.62  0.14  0.03 -0.29 -0.45\n                                          \nNumber of obs: 1632, groups:  school_id, 84\n\nFixed effects:\n                  Estimate Std. Error t value\n(Intercept)        380.018     41.386   9.182\nmother_educ_level    9.600      5.473   1.754\nfather_educ_level   11.101      3.837   2.893\ngendermale          -4.644      4.103  -1.132\ncomputeryes         13.487      8.719   1.547\ninternetyes         39.588     34.962   1.132\ndeskyes             -2.878      7.947  -0.362\nroomyes            -17.996      8.117  -2.217\ntelevisionyes       -6.452     10.412  -0.620\ncaryes               6.369     14.872   0.428\nn_books             17.533      2.377   7.376\nwealth              -3.176      2.720  -1.167\nescs                14.789      2.807   5.268\noptimizer (nloptwrap) convergence code: 0 (OK)\nboundary (singular) fit: see help('isSingular')\n\n\n\n\nCode\nplot_model(mod_f, type  = \"re\") + theme(text = element_text(size=7))\n\n\n\n\n\nThis still led to a near singular model because of model complexity\nIf the model is to be trusted, we see that individual variability within schools is high for whether or not one has a car and access to internet. Also surprisingly, unlike the nested countries model, internet was not significantly predictive for math scores in Finland. In contrast having a desk was important. This highlights a limitation of the modeling approach. Different countries and potentially schools have different responses to each of the predictors. A varying slopes model for each predictor with multiple levels may be ideal but such models fail to converge."
  },
  {
    "objectID": "learning/20231012_SmarterKids/index.html#smartness-explained-by-the-book",
    "href": "learning/20231012_SmarterKids/index.html#smartness-explained-by-the-book",
    "title": "Analysis: The Smartest Kids in the World",
    "section": "Smartness explained by the book",
    "text": "Smartness explained by the book\n\nExpectations for teacher excellence\n\nFinnish teacher training programs are prestigious and extremely selective (think Georgetown to MIT acceptance rates!) while US teacher programs have a low admission bar.\nKorean Hogwans (private after school college prep tutoring) teachers earn very well and their performance is evaluated by student and parent surveys which in turn determines teach dismissals\nIn Finland, teachers undergo 1 year of practical training as opposed to 12 - 15 weeks required in USA.\n\nStudent‚Äôs innate drive\n\nIn high pressure environments like Korea, students have an innate drive that is reinforced by parents, peers and culture\nSisu is a cultural mindset in Finland that encapsulates grit, determination, tenacity and resilience in one word.\nStandardized tests with standards above that of the SAT may be used as a tool to cultivate drive and create manageable pressure along with providing an aspirational goal.\n\nCurriculum standards\n\nWhen school demands less of kids they lose interest and don‚Äôt take it seriously.\nAmerican schools tend to have lower standards (math is 2 grades below Korean schools!) with a heavy emphasis on sports. This is further emphasized by high standards and the presidential tests. The focus on athletics may drain resources from academics.\nRigor can also be counteracted by trivialized assignments e.g multiple choice questions and poster projects that don‚Äôt promote as much critical thinking\n\nCultural mindsets\n\nKorean society supports their students on the national standardized test day by delaying stock markets to minimize traffic and grounding planes to avoid excessive noise.\nThere is a collective expectation that academics is meaningful and important for future success in life\n\nParental involvement\n\nOddly parent participation in school through volunteer opportunities and PTA roles did not enhance a child‚Äôs learning outcomes\nInstead, activities like daily reading and discussion on a variety of topics to enrich a child‚Äôs learning more directly were beneficial.\nParents serving as coaches rather cheerleaders are more effective by offering authentic and not excessive. An authoritative parenting style should foster independence but also enforce firm boundaries.\n\nDistances in teacher-student relationships to preserve rigor\n\nTeachers in Finland actually aim for minimal empathy and no labeling to preserve rigor and avoid such systemic biases.\nIn America, teachers strive to build personal relationships with their students.\n\n\nAnd interestingly, the above features dominate things like racial disparities and poverty. Oddly, labeling children by race or economic status might have actually impeded an unbiased approach to teaching."
  },
  {
    "objectID": "learning/20231012_SmarterKids/index.html#summary",
    "href": "learning/20231012_SmarterKids/index.html#summary",
    "title": "Analysis: The Smartest Kids in the World",
    "section": "Summary",
    "text": "Summary\nIt was interesting to dive into the complexities of education systems. I also had an appreciation for the investigative approaches in the book which offered more qualitative findings.\nIt was nice to see that my models leaned in the same direction as the book. They definitely point towards the importance of academic rigor with access to internet and more books being important to student success. They also highlighted the importance of teaching since student-teacher ratio was predictive of a school‚Äôs overall scores.\nMost of all, building systems that beget academic excellence is very challenging. The book is worth a read!"
  }
]